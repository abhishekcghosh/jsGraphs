<!doctype html>
<html>
<head>
<style type="text/css">
	body {
		font-family: "Courier New", "Lucida Console", Monotype;
		font-size: 1em;
		background-color: teal;
		color: white;
	}
	.consoleLike {
		margin: 10px 0px;
		border: 2px dotted white;
		background-color: black;
		color: yellow;
		padding: 10px;
		height: 400px;
		width: 80%;
		overflow: scroll;

	}
	input[type="button"] {
		background-color: #333;
		border: 2px solid black;
		color: yellow;
		cursor: pointer;
		padding: 4px;
		font-family: "Courier New", "Lucida Console", Monotype;
		font-size: 0.8em;
	}
	input[type="button"]:hover {
		background-color: #666;
	}
</style>
	<script type="text/javascript" src="graph.js"></script>
	<script type="text/javascript">
		var xhr1, xhr2, graphData1, graphData2, graph1, graph2;
		function getXMLHttp() {
			if (window.XMLHttpRequest) { return new XMLHttpRequest(); } 
			else { return new ActiveXObject("Microsoft.XMLHTTP"); }
		}		
		function writeToConsoles(str) {
			var txtArea = document.getElementById("consoleLike")
			txtArea.value += str;
			txtArea.scrollTop = txtArea.scrollHeight;
			console.log(str);
		}		
		function doDFSTests(graph) {
			// do DFS (search 5, from 0, verbose mode)
			var graphDFSResult;
 			writeToConsoles("\nRunning " + graph.getGraphName() + " DFS Test #1 with searchVertex = 5, startFromVertex = 0 in verbose mode.");
 			graphDFSResult = graph.depthFirstSearch(5, 0, true);
 			writeToConsoles("\nDFS Complete. Result: " + graphDFSResult.searchResult);
 			writeToConsoles("\nPath traced: " + graphDFSResult.pathTrace);
 			writeToConsoles("\nPath Length: " + graphDFSResult.pathLength);
 			writeToConsoles("\nDFS Run Data:\n " + graphDFSResult.verboseData);
 			// do DFS (search 7, from 3, verbose mode)
 			writeToConsoles("\nRunning " + graph.getGraphName() + " DFS Test #2 with searchVertex = 7, startFromVertex = 0 in verbose mode.");
 			graphDFSResult = graph.depthFirstSearch(7, 3, true);
 			writeToConsoles("\nDFS Complete. Result: " + graphDFSResult.searchResult);
 			writeToConsoles("\nPath traced: " + graphDFSResult.pathTrace);
 			writeToConsoles("\nPath Length: " + graphDFSResult.pathLength);
 			writeToConsoles("\nDFS Run Data:\n " + graphDFSResult.verboseData);
 			// do DFS (search 1, from 5, non verbose mode)
 			writeToConsoles("\nRunning " + graph.getGraphName() + " DFS Test #3 with searchVertex = 1, startFromVertex = 5 in non verbose mode.");
 			graphDFSResult = graph.depthFirstSearch(1, 5, false);
 			writeToConsoles("\nDFS Complete. Result: " + graphDFSResult.searchResult);
 			writeToConsoles("\nPath traced: " + graphDFSResult.pathTrace);
 			writeToConsoles("\nPath Length: " + graphDFSResult.pathLength);
 			writeToConsoles("\nDFS Run Data:\n " + graphDFSResult.verboseData);
 			// do DFS (search 9, from 2, non verbose mode)
 			writeToConsoles("\nRunning " + graph.getGraphName() + " DFS Test #4 with searchVertex = 9, startFromVertex = 2 in non verbose mode.");
 			graphDFSResult = graph.depthFirstSearch(9, 2, false);
 			writeToConsoles("\nDFS Complete. Result: " + graphDFSResult.searchResult);
 			writeToConsoles("\nPath traced: " + graphDFSResult.pathTrace);
 			writeToConsoles("\nPath Length: " + graphDFSResult.pathLength);
 			writeToConsoles("\nDFS Run Data:\n " + graphDFSResult.verboseData);

		}
		function doBFSTests(graph) {
			// do BFS (search 5, from 0, verbose mode)
			var graphBFSResult;
 			writeToConsoles("\nRunning " + graph.getGraphName() + " BFS Test #1 with searchVertex = 5, startFromVertex = 0 in verbose mode.");
 			graphBFSResult = graph.breadthFirstSearch(5, 0, true);
 			writeToConsoles("\nBFS Complete. Result: " + graphBFSResult.searchResult);
 			writeToConsoles("\nPath traced: " + graphBFSResult.pathTrace);
 			writeToConsoles("\nPath Length: " + graphBFSResult.pathLength);
 			writeToConsoles("\nBFS Run Data:\n " + graphBFSResult.verboseData);
 			// do BFS (search 7, from 3, verbose mode)
 			writeToConsoles("\nRunning " + graph.getGraphName() + " BFS Test #2 with searchVertex = 7, startFromVertex = 0 in verbose mode.");
 			graphBFSResult = graph.breadthFirstSearch(7, 3, true);
 			writeToConsoles("\nBFS Complete. Result: " + graphBFSResult.searchResult);
 			writeToConsoles("\nPath traced: " + graphBFSResult.pathTrace);
 			writeToConsoles("\nPath Length: " + graphBFSResult.pathLength);
 			writeToConsoles("\nBFS Run Data:\n " + graphBFSResult.verboseData);
 			// do BFS (search 1, from 5, non verbose mode)
 			writeToConsoles("\nRunning " + graph.getGraphName() + " BFS Test #3 with searchVertex = 1, startFromVertex = 5 in non verbose mode.");
 			graphBFSResult = graph.breadthFirstSearch(1, 5, false);
 			writeToConsoles("\nBFS Complete. Result: " + graphBFSResult.searchResult);
 			writeToConsoles("\nPath traced: " + graphBFSResult.pathTrace);
 			writeToConsoles("\nPath Length: " + graphBFSResult.pathLength);
 			writeToConsoles("\nBFS Run Data:\n " + graphBFSResult.verboseData);
 			// do BFS (search 9, from 2, non verbose mode)
 			writeToConsoles("\nRunning " + graph.getGraphName() + " BFS Test #4 with searchVertex = 9, startFromVertex = 2 in non verbose mode.");
 			graphBFSResult = graph.breadthFirstSearch(9, 2, false);
 			writeToConsoles("\nBFS Complete. Result: " + graphBFSResult.searchResult);
 			writeToConsoles("\nPath traced: " + graphBFSResult.pathTrace);
 			writeToConsoles("\nPath Length: " + graphBFSResult.pathLength);
 			writeToConsoles("\nBFS Run Data:\n " + graphBFSResult.verboseData);

		}
		function doDijkstraTests(graph) {
			// do BFS (search 5, from 0, verbose mode)
			var graphDJKResult;
 			writeToConsoles("\nRunning " + graph.getGraphName() + " Dijkstra Test #1 with searchVertex = 5, startFromVertex = 0 in verbose mode.");
 			graphDJKResult = graph.dijkstra(5, 0, true);
 			writeToConsoles("\nShortest-Path (using Dijkstra's Algorithm) Run Complete. Result: " + graphDJKResult.searchResult);
 			writeToConsoles("\nShortest-Path traced: " + graphDJKResult.pathTrace);
 			writeToConsoles("\nPath cost (minimum): " + graphDJKResult.pathCost);
 			writeToConsoles("\nShortest-Path Run Data:\n " + graphDJKResult.verboseData);
 			// do BFS (search 7, from 3, verbose mode)
 			writeToConsoles("\nRunning " + graph.getGraphName() + " Dijkstra Test #2 with searchVertex = 7, startFromVertex = 3 in verbose mode.");
 			graphDJKResult = graph.dijkstra(7, 3, true);
 			writeToConsoles("\nShortest-Path (using Dijkstra's Algorithm) Run Complete. Result: " + graphDJKResult.searchResult);
 			writeToConsoles("\nShortest-Path traced: " + graphDJKResult.pathTrace);
 			writeToConsoles("\nPath cost (minimum): " + graphDJKResult.pathCost);
 			writeToConsoles("\nShortest-Path Run Data:\n " + graphDJKResult.verboseData);
 			// do BFS (search 1, from 5, non verbose mode)
 			writeToConsoles("\nRunning " + graph.getGraphName() + " Dijkstra Test #3 with searchVertex = 1, startFromVertex = 5 in verbose mode.");
 			graphDJKResult = graph.dijkstra(1, 5, false);
 			writeToConsoles("\nShortest-Path (using Dijkstra's Algorithm) Run Complete. Result: " + graphDJKResult.searchResult);
 			writeToConsoles("\nShortest-Path traced: " + graphDJKResult.pathTrace);
 			writeToConsoles("\nPath cost (minimum): " + graphDJKResult.pathCost);
 			writeToConsoles("\nShortest-Path Run Data:\n " + graphDJKResult.verboseData);
 			// do BFS (search 9, from 2, non verbose mode)
 			writeToConsoles("\nRunning " + graph.getGraphName() + " Dijkstra Test #4 with searchVertex = 9, startFromVertex = 2 in verbose mode.");
 			graphDJKResult = graph.dijkstra(9, 2, false);
 			writeToConsoles("\nShortest-Path (using Dijkstra's Algorithm) Run Complete. Result: " + graphDJKResult.searchResult);
 			writeToConsoles("\nShortest-Path traced: " + graphDJKResult.pathTrace);
 			writeToConsoles("\nPath cost (minimum): " + graphDJKResult.pathCost);
 			writeToConsoles("\nShortest-Path Run Data:\n " + graphDJKResult.verboseData);

		}


		function start() {
			if (window.addEventListener) {
				document.getElementById("btn_clearConsoleLike").addEventListener("click", function () {
					document.getElementById("consoleLike").value = "";
				});
				document.getElementById("btn_loadGraph1").addEventListener("click", function () {
					var fileName = "graph3.json";
					writeToConsoles("\nLoading " + fileName + "...");
					xhr1 = getXMLHttp();
				 	xhr1.open("GET", "graph3.json", true);
				 	xhr1.send(null);
				 	xhr1.onreadystatechange = function () {
				 		if (xhr1.readyState == 4) {
				 			graphData1 = JSON.parse(xhr1.responseText);
				 			graph1 = new Graph(fileName);
				 			graph1.createGraphFromJSON(graphData1);
				 			writeToConsoles(graph1.displayGraph());
				 			writeToConsoles("\n");				 			
				 		}
				 	}
				 	document.getElementById("btn_DumpGraph1").style.visibility = "visible";
				 	document.getElementById("btn_DFSGraph1").style.visibility = "visible";
				 	document.getElementById("btn_BFSGraph1").style.visibility = "visible";
				 	document.getElementById("btn_DJKGraph1").style.visibility = "visible";
				});
				document.getElementById("btn_loadGraph2").addEventListener("click", function () {
					var fileName = "graph4.json";
					writeToConsoles("\nLoading "+ fileName + "...");
					xhr2 = getXMLHttp();
				 	xhr2.open("GET", "graph4.json", true);
				 	xhr2.send(null);
				 	xhr2.onreadystatechange = function () {
				 		if (xhr2.readyState == 4) {
				 			graphData2 = JSON.parse(xhr2.responseText);
				 			graph2 = new Graph(fileName);
				 			graph2.createGraphFromJSON(graphData2);
				 			writeToConsoles(graph2.displayGraph());
				 			writeToConsoles("\n");
				 		}
				 	}
				 	document.getElementById("btn_DumpGraph2").style.visibility = "visible";
				 	document.getElementById("btn_DFSGraph2").style.visibility = "visible";
				 	document.getElementById("btn_BFSGraph2").style.visibility = "visible";
				 	document.getElementById("btn_DJKGraph2").style.visibility = "visible";
				});
				document.getElementById("btn_DFSGraph1").addEventListener("click", function () {
					doDFSTests(graph1);
				});
				document.getElementById("btn_DFSGraph2").addEventListener("click", function () {
					doDFSTests(graph2);
				});
				document.getElementById("btn_BFSGraph1").addEventListener("click", function () {
					doBFSTests(graph1);
				});
				document.getElementById("btn_BFSGraph2").addEventListener("click", function () {
					doBFSTests(graph2);
				});
				document.getElementById("btn_DJKGraph1").addEventListener("click", function () {
					doDijkstraTests(graph1);
				});
				document.getElementById("btn_DJKGraph2").addEventListener("click", function () {
					doDijkstraTests(graph2);
				});
				document.getElementById("btn_DumpGraph1").addEventListener("click", function () {
					writeToConsoles(JSON.stringify(graph1, null, 4));
				});
				document.getElementById("btn_DumpGraph2").addEventListener("click", function () {
					writeToConsoles(JSON.stringify(graph2, null, 4));
				});

			} else {
				//window.attachEvent("load", runGraphTest);
			}
		}
		window.addEventListener("load", start);	
	</script>
</head>
<body>
	<code>
		<strong>
		Graph Theory + JSON + XMLHttp Experiments in JS</strong><br/>
		Abhishek Ghosh [github.com/abhishekcghosh]<br/>
		-----------------------------------------------<br/>
		Hint: <br/>
		* View Browser Console for more information.<br/>		
		* Enable "Log XMLHttpRequests" for better results.
	</code>
	<br/>
	<textarea class="consoleLike" id="consoleLike">
	</textarea>
	<br/>
	<input type="button" value="Load 1" id="btn_loadGraph1" />
	<input type="button" value="Dump 1" id="btn_DumpGraph1" style="visibility: hidden" />
	<input type="button" value="DFS 1" id="btn_DFSGraph1" style="visibility: hidden" />
	<input type="button" value="BFS 1" id="btn_BFSGraph1" style="visibility: hidden" />
	<input type="button" value="Dijkstra 1" id="btn_DJKGraph1" style="visibility: hidden" />
	<br/>
	<input type="button" value="Load 2" id="btn_loadGraph2" />
	<input type="button" value="Dump 2" id="btn_DumpGraph2" style="visibility: hidden" />
	<input type="button" value="DFS 2" id="btn_DFSGraph2" style="visibility: hidden" />
	<input type="button" value="BFS 2" id="btn_BFSGraph2" style="visibility: hidden" />
	<input type="button" value="Dijkstra 2" id="btn_DJKGraph2" style="visibility: hidden" />
	<br/>
	<input type="button" value="Clear Console" id="btn_clearConsoleLike" />
	


</body>
</html>
