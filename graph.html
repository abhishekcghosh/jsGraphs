<!doctype html>
<html>
<head>
<style type="text/css">
	body {
		font-family: "Courier New", "Lucida Console", Monotype;
		font-size: 1em;
		background-color: teal;
		color: white;
	}
	.consoleLike {
		margin: 10px;
		border: 2px dotted white;
		background-color: black;
		color: yellow;
		padding: 10px;
		height: 400px;
		width: 80%;
		overflow: scroll;

	}
</style>
	<script type="text/javascript" src="graph.js"></script>
	<script type="text/javascript">
		var xhr1, xhr2, graphData1, graphData2, graph1, graph2;
		function getXMLHttp() {
			if (window.XMLHttpRequest) { return new XMLHttpRequest(); } 
			else { return new ActiveXObject("Microsoft.XMLHTTP"); }
		}		
		function writeToConsoles(str) {
			document.getElementById("consoleLike").value += str;
			console.log(str);
		}
		function runGraphTest() {
		 	// graph1, bidirectional edges
		 	xhr1 = getXMLHttp();
		 	xhr1.open("GET", "graph1.json", true);
		 	xhr1.send(null);
		 	xhr1.onreadystatechange = function () {
		 		if (xhr1.readyState == 4) {
		 			graphData1 = JSON.parse(xhr1.responseText);
		 			graph1 = new Graph("GRAPH_1");
		 			graph1.createGraphFromJSON(graphData1);
		 			writeToConsoles(graph1.displayGraph());
		 			doDFSTests(graph1);
		 			
		 		}
		 	}
		 	// graph2, directional edges
		 	xhr2 = getXMLHttp();
		 	xhr2.open("GET", "graph2.json", true);
		 	xhr2.send(null);
		 	xhr2.onreadystatechange = function () {
		 		if (xhr2.readyState == 4) {
		 			graphData2 = JSON.parse(xhr2.responseText);
		 			graph2 = new Graph("GRAPH_2");
		 			graph2.createGraphFromJSON(graphData2);
		 			writeToConsoles(graph2.displayGraph());
		 			doDFSTests(graph2);
		 			
		 		}
		 	}

		}
		function doDFSTests(graph) {
			// do DFS (search 5, from 0, verbose mode)
			var graphDFSResult;
 			writeToConsoles("\nRunning " + graph.getGraphName() + " DFS Test #1 with searchVertex = 5, startFromVertex = 0 in verbose mode.");
 			graphDFSResult = graph.depthFirstSearch(5, 0, true);
 			writeToConsoles("\nDFS Complete. Result: " + graphDFSResult.searchResult);
 			writeToConsoles("\nFound at Depth: " + graphDFSResult.depth);
 			writeToConsoles("\nDFS Run Data:\n " + graphDFSResult.verboseData);
 			// do DFS (search 7, from 3, verbose mode)
 			writeToConsoles("\nRunning " + graph.getGraphName() + " DFS Test #2 with searchVertex = 7, startFromVertex = 0 in verbose mode.");
 			graphDFSResult = graph.depthFirstSearch(7, 3, true);
 			writeToConsoles("\nDFS Complete. Result: " + graphDFSResult.searchResult);
 			writeToConsoles("\nFound at Depth: " + graphDFSResult.depth);
 			writeToConsoles("\nDFS Run Data:\n " + graphDFSResult.verboseData);
 			// do DFS (search 1, from 5, non verbose mode)
 			writeToConsoles("\nRunning " + graph.getGraphName() + " DFS Test #3 with searchVertex = 1, startFromVertex = 5 in non verbose mode.");
 			graphDFSResult = graph.depthFirstSearch(1, 5, true);
 			writeToConsoles("\nDFS Complete. Result: " + graphDFSResult.searchResult);
 			writeToConsoles("\nFound at Depth: " + graphDFSResult.depth);
 			writeToConsoles("\nDFS Run Data:\n " + graphDFSResult.verboseData);
 			// do DFS (search 9, from 2, non verbose mode)
 			writeToConsoles("\nRunning " + graph.getGraphName() + " DFS Test #4 with searchVertex = 9, startFromVertex = 2 in non verbose mode.");
 			graphDFSResult = graph.depthFirstSearch(9, 2, false);
 			writeToConsoles("\nDFS Complete. Result: " + graphDFSResult.searchResult);
 			writeToConsoles("\nFound at Depth: " + graphDFSResult.depth);
 			writeToConsoles("\nDFS Run Data:\n " + graphDFSResult.verboseData);

		}
		function start() {
			if (window.addEventListener) {
				window.addEventListener("load", runGraphTest);	
			} else {
				window.attachEvent("load", runGraphTest);
			}
		}
		start();		
	</script>
</head>
<body>
	<code>
		<strong>
		Graph Theory + JSON + XMLHttp Experiments in JS</strong><br/>
		Abhishek Ghosh [github.com/abhishekcghosh]<br/>
		-----------------------------------------------<br/>
		Hint: <br/>
		* View Browser Console for more information.<br/>		
		* Enable "Log XMLHttpRequests" for better results.
	</code>
	<br/>
	<textarea class="consoleLike" id="consoleLike">
	</textarea>
</body>
</html>
